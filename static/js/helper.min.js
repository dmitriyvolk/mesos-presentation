/*!
 * xbo-mesos-presentation 1.0.0 (2015-05-25, 02:55)
 * https://github.com/dmitriyvolk/mesos-presentation/
 * MIT licensed
 *
 * Copyright (C) 2015 Dmitriy Volk, dmitriy.volk@gmail.com
 */
function readDemoConfig(){try{return JSON.parse(fs.readFileSync(configFileName,"utf-8"))}catch(a){return{}}}var express=require("express"),bodyParser=require("body-parser"),multer=require("multer"),fs=require("fs"),app=module.exports=express(),configFileName="./config.json";app.use("/static",express["static"]("helper_static")),app.use(bodyParser.json()),app.use(bodyParser.urlencoded({extended:!0})),app.use(multer()),app.get("/",function(a,b){b.redirect("/static/index.html")}),app.get("/config",function(a,b){b.json(readDemoConfig())}),app.post("/config",function(a,b){var c=a.body;console.log(c);var d=readDemoConfig();for(var e in c)c.hasOwnProperty(e)&&(console.log("Adding "+e),d[e]=c[e]);console.log(d),fs.writeFile(configFileName,JSON.stringify(d),function(a){return a?console.log(a):void console.log("Saved "+configFileName)}),b.sendStatus(200)});